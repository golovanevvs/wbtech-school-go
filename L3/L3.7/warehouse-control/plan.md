# warehouse-control

Путь до проекта внутри репозитория:

- L3/L3.7/warehouse-control

## План реализация

- warehouse-control_main-server - api-сервер на Go;
- warehouse-control_web-client - web-клиент на next.js (для запуска команд вместо npm использовать pnpm).

### web-клиент (next.js)

- авторизация (выполнено):
  - осуществляется с помощью access и refresh JWT (JWTs хранить в cookie);
  - три уровня доступа:
    - "Кладовщик";
    - "Менеджер";
    - "Аудитор";

- Header общий для всех страниц:
  - если авторизован:
    - название "Warehouse Control" -> переход на страницу "Главная" (`/`);
    - кнопка "Профиль" (`AccountCircleIcon`) -> всплывающее меню:
      - кнопка меню "Профиль" (`IconButton`, `AccountCircleIcon`) -> переход на страницу "Профиль" (`/profile`);
      - кнопка меню "Сменить тему"(`Brightness7Icon`, `Brightness4Icon`) -> переключение темы (светлая/тёмная);
      - кнопка меню "Выйти" (`LogoutIcon`) -> выход из аккаунта, переход на страницу "Вход" (`/auth`);
  - если не авторизован:
    - название "Warehouse Control" -> переход на страницу "Главная" (`/`);
    - кнопка "Вход" (`IconButton`, `LoginIcon`) -> переход на страницу "Вход" (`/auth`);

- Footer общий для всех страниц (выполнено):
  - текст, содержащий контакты разработчика (Telegram username);

- страница "Главная" (`/`):
  - если авторизован:
    - загрузка списка товаров с сервера (`GET /items`);
    - имя пользователя, его роль;
    - кнопка "Добавить" (отображается только для уровня "Кладовщик") -> переход на страницу "Добавление товара" (`/add-item`);
    - таблица для отображения списка товаров (`material react table`):
      - поле "ID";
      - поле "Название";
      - поле "Цена";
      - поле "Количество";
      - поле "Дата создания";
      - поле "Дата изменения";
      - поле "Действия":
        - кнопка "Редактировать" (активна для уровня "Кладовщик") -> переход на страницу "Редактирование товара" (`/edit-item`);
        - кнопка "Удалить" (активна для уровня "Кладовщик");
        - кнопка "История изменений" (активна для уровня "Аудитор") -> переход на страницу "История изменений" (`/history`);
  - если не авторизован:
    - автоматический переход на страницу "Вход" (`/auth`);

- страница "Профиль" (`/profile`):
  - загрузка данных с сервера (`GET /profile`);
  - отображение инфомации о пользователе;

  - страница "Вход" (`/auth`):
    - режим "Вход":
      - форма для входа;
      - кнопка "Войти" -> `POST /auth/login`, переход на страницу "Главная" (`/`);
      - кнопка переключения режима;
    - режим "Регистрация":
      - форма для регистрации;
      - кнопка "Зарегистрироваться" -> `POST /auth/register`, переход на страницу "Главная" (`/`);
      - кнопка переключения режима;

- страница "Добавление товара" (`/add-item`):
  - загрузка данных с сервера (`GET /items/{id}`);
  - форма для добавления товара;
  - кнопка "Сохранить" -> `POST /items/{id}`, переход на страницу "Главная (`/`);
  - кнопка "Отменить" -> переход на страницу "Главная" (`/`);

- страница "Редактирование товара" (`/edit-item`):
  - загрузка данных с сервера (`GET /items/{id}`);
  - форма для редактирования товара;
  - кнопка "Сохранить" -> `PUT /items/{id}`, переход на страницу "Главная (`/`);
  - кнопка "Отменить" -> переход на страницу "Главная" (`/`);
  
- страница "История изменений" (`/history`):
  - загрузка данных с сервера (`GET /items/{id}/history`);
  - кнопка "Список товаров" -> переход на страницу "Главная" (`/`);
  - кнопка "Экспорт в CSV" -> `GET /items/{id}/history/export`, скачивание csv-файла;
  - таблица для отображения истории изменений товара (`material react table`):
    - поле "ID";
    - поле "Дата изменения";
    - поле "Что изменилось".
